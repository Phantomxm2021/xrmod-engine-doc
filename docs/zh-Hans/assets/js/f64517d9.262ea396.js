"use strict";(self.webpackChunkxrmod_manual=self.webpackChunkxrmod_manual||[]).push([[8285],{34809:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var o=t(87462),n=(t(67294),t(3905)),i=(t(44681),t(61422));const s={title:"How To Mapping The World",keywords:["ar","xr","vr","apple glasses","hololens","quest","pico","easyAR","vuforia","xrmod","mod","doc","metaverse","facebook","meta","unity"],image:"img/xrmod-docs-card.png",description:"Mapping the earth and collection data"},r=void 0,l={unversionedId:"tutorial-basics/how-to-mapping-the-world",id:"tutorial-basics/how-to-mapping-the-world",title:"How To Mapping The World",description:"Mapping the earth and collection data",source:"@site/docs/experience-manual/tutorial-basics/how-to-mapping-the-world.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/how-to-mapping-the-world",permalink:"/zh-Hans/experience-manual/tutorial-basics/how-to-mapping-the-world",draft:!1,editUrl:"https://github.com/Phantomxm2021/xrmod-engine-docs-source/tree/main/docs/docs/experience-manual/tutorial-basics/how-to-mapping-the-world.md",tags:[],version:"current",frontMatter:{title:"How To Mapping The World",keywords:["ar","xr","vr","apple glasses","hololens","quest","pico","easyAR","vuforia","xrmod","mod","doc","metaverse","facebook","meta","unity"],image:"img/xrmod-docs-card.png",description:"Mapping the earth and collection data"},sidebar:"tutorialSidebar",previous:{title:"How To Bake Light Into Prefab",permalink:"/zh-Hans/experience-manual/tutorial-basics/how-to-bake-light"},next:{title:"Create First ARExperience",permalink:"/zh-Hans/experience-manual/tutorial-advanced/create-first-arexperience"}},p={},c=[{value:"Space Requirements",id:"space-requirements",level:2},{value:"Mapping instructions",id:"mapping-instructions",level:2},{value:"Examples",id:"examples",level:2},{value:"&quot;AR Hotspot&quot;",id:"ar-hotspot",level:3},{value:"Indoor spaces",id:"indoor-spaces",level:3},{value:"Anchor Images",id:"anchor-images",level:2},{value:"Using Anchor Images",id:"using-anchor-images",level:3}],m={toc:c};function d(e){let{components:a,...s}=e;return(0,n.kt)("wrapper",(0,o.Z)({},m,s,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"A ",(0,n.kt)("strong",{parentName:"p"},"Feature Point")," is a distinct, high-contrast visual feature in an image. A corner of a poster on the wall, the grain on a wooden floor or a detail in the facade of a building.")),(0,n.kt)("p",null,"Map construction works by finding the same ",(0,n.kt)("strong",{parentName:"p"},"Feature Points")," in multiple images from different viewpoints and estimating the 3D structure of scene by triangulating those feature points."),(0,n.kt)("p",null,"It is important to try to cover the target environment from multiple viewpoints and possibly different distances if necessary."),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"You should aim to have even as much as 50% overlap between images you want to match.",(0,n.kt)("br",{parentName:"p"}),"\n","For best results, the same Feature Points should be matched in at least 3 different images")),(0,n.kt)("p",null,"When mapping, our ",(0,n.kt)("strong",{parentName:"p"},"Mapping App")," will notify you if subsequent images can be connected by matching ",(0,n.kt)("strong",{parentName:"p"},"Feature Points"),"."),(0,n.kt)("p",null,"Below is an illustration of 9 captured images and how they connect to each other."),(0,n.kt)("coverimg",{url:t(95295)}),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Keep in mind that not all sequential images need to connect!",(0,n.kt)("br",{parentName:"p"}),"\n","The above images were captured in sequence, and images 3 and 4 are not connected to each other. That does not matter as, for example, image 3 will connect to 1, 2 and 9 when the map is constructed.")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"space-requirements"},"Space Requirements"),(0,n.kt)("p",null,"Not all spaces can be mapped."),(0,n.kt)("p",null,"For example, highly reflective surfaces don't have static visual features for map construction."),(0,n.kt)("p",null,"Another problem is large areas with uniform color with no detectable visual features at all."),(0,n.kt)("coverimg",{url:t(62705)}),(0,n.kt)("admonition",{type:"danger"},(0,n.kt)("p",{parentName:"admonition"},"Not enough visual features and most of them are on an object that is likely to move around.")),(0,n.kt)("coverimg",{url:t(28512)}),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"Plenty of visual features. Some of them are still on a moving object, but many others are on static surfaces. This kind of a scene can be mapped easily.")),(0,n.kt)("coverimg",{url:t(68378)}),(0,n.kt)("admonition",{type:"danger"},(0,n.kt)("p",{parentName:"admonition"},"Reflective surfaces cause the camera to see false visual features. These reflected features will move visually depending on the viewpoint and can not be used for construction.")),(0,n.kt)("coverimg",{url:t(39529)}),(0,n.kt)("admonition",{type:"danger"},(0,n.kt)("p",{parentName:"admonition"},"Low-light scenes will be difficult for the camera to see. Any visual features will likely be fuzzy, noisy and cause problems if they are even detected.")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"mapping-instructions"},"Mapping instructions"),(0,n.kt)("p",null,"To construct a good map, the captured images need to cover the same areas from different angles."),(0,n.kt)("p",null,"When localizing against a map, the map should contain data from a captured image with a similar viewpoint in it."),(0,n.kt)("p",null,"The captured images don't need to be identical by any means, but should have a roughly similar angle and distance to target."),(0,n.kt)("p",null,"The more captured images a Feature Point appears in, the better its accuracy will be. The system requires a Feature Point to be found in two captured images, but more will be better."),(0,n.kt)("coverimg",{url:t(42573)}),(0,n.kt)("admonition",{type:"danger"},(0,n.kt)("coverimg",{url:t(24456),width:"50%"}),(0,n.kt)("p",{parentName:"admonition"},"No overlap between captured images as all the images are viewing different directions. Matching features can't be found between them and the images will not connect.")),(0,n.kt)("coverimg",{url:t(23952)}),(0,n.kt)("admonition",{type:"danger"},(0,n.kt)("coverimg",{url:t(6800),width:"50%"}),(0,n.kt)("p",{parentName:"admonition"},"No parallax between sets, all images are captured from a single viewpoint.",(0,n.kt)("br",{parentName:"p"}),"\n","Matching Features Points are found but the resulting map either fails or is inaccurate with no distance between captured images.",(0,n.kt)("br",{parentName:"p"}),"\n",'For better results, capture images further apart from each other or capture many "panoramas" if you already have some experience with mapping.')),(0,n.kt)("coverimg",{url:t(54561)}),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("coverimg",{url:t(27883),width:"50%"}),(0,n.kt)("p",{parentName:"admonition"},"Nice overlap of Feature Points between captured imaged and plenty of parallax between them. The resulting map will be very accurate.")),(0,n.kt)("coverimg",{url:t(79686)}),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("coverimg",{url:t(78439),width:"50%"}),(0,n.kt)("p",{parentName:"admonition"},"This image illustrates the overlapping Feature Points between sequential captured images.",(0,n.kt)("br",{parentName:"p"}),"\n","For a good connection between images, you should aim to have images overlap from one third up to half of the image area. This makes sure that enough of the same features are found between different images.")),(0,n.kt)("p",null,"To make sure an area or an object is included in the map, you need to have at least 3 different but similar viewpoints of the object."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("coverimg",{url:t(61856),width:"50%"}),(0,n.kt)("p",{parentName:"admonition"},"At least 3 different but similar enough viewpoints of the object and its visual fea")),(0,n.kt)("admonition",{type:"danger"},(0,n.kt)("coverimg",{url:t(22031),width:"50%"}),(0,n.kt)("p",{parentName:"admonition"},"At least 3 different but similar enough viewpoints of the object and its visual fea")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"examples"},"Examples"),(0,n.kt)("h3",{id:"ar-hotspot"},'"AR Hotspot"'),(0,n.kt)("p",null,"Small to medium specific locations that when viewed, are enhanced with Augmented Reality content.",(0,n.kt)("br",{parentName:"p"}),"\n","These locations do not require mapping everything around the user, just the point of interest.  "),(0,n.kt)("p",null,"Examples of hotspots are statues, murals and other street art. Also storefronts, pop-up stores and exhibitions boothes and installations for movie marketing campaigns."),(0,n.kt)("coverimg",{url:t(36463),label:"Examples of AR Hotspots"}),(0,n.kt)("p",null,"When mapping such hotspots, try to cover as much as possible from as many angles as possible. Take a series of images that overlap with each other. If you need to cover a specific part of the hotspot with extra detail, you can take close-ups of that area."),(0,n.kt)("coverimg",{url:t(62463),label:"Mapping an AR hotspot"}),(0,n.kt)("p",null,'If you need to map a very long area that would be difficult to cover in one arc, you can try to cover it with multiple "mini-arcs" as illustrated below.'),(0,n.kt)("p",null,"You can also take additional images from further away. These will help our SDK to localize to the scene from further away and also will help to connect everything together."),(0,n.kt)("coverimg",{url:t(13659),label:"Mapping a very long area, like a mural"}),(0,n.kt)("coverimg",{url:t(18948),label:"A statue in Helsinki"}),(0,n.kt)("p",null,"Landmarks like statues are a good example of a hotspot location that can be mapped from all around. To map a statue like this, just take a series of images in one full circle around it."),(0,n.kt)("p",null,"Try to fit all important visual features in the images. You can map either in landscape or portrait mode. You can also mix orientations if you want to cover some parts with close-ups."),(0,n.kt)("coverimg",{url:t(19180),label:"Mapping a landmark from every angle"}),(0,n.kt)("h3",{id:"indoor-spaces"},"Indoor spaces"),(0,n.kt)("p",null,"Large indoor spaces can be divided into separate maps for each area or room. This makes it easy to update any areas that may change over time. It also makes is easier to maps individual parts."),(0,n.kt)("p",null,'To map a single room, map using the "outside-in" method. Take a series of images while moving around the perimeter of the room looking across the space.'),(0,n.kt)("p",null,"Remember that you can use either landscape or portrait mode. In smaller rooms, landscape often works very well. "),(0,n.kt)("p",null,"Just try to cover the whole area from as many angles as possible."),(0,n.kt)("coverimg",{url:t(34416)}),(0,n.kt)("coverimg",{url:t(54710),label:"Mapping a single indoor space"}),(0,n.kt)("p",null,"You can align multiple maps together in Unity with our ",(0,n.kt)("strong",{parentName:"p"},"Multi Map feature"),".\nNot all areas need to be connected in just one map."),(0,n.kt)("coverimg",{url:t(62160),label:"A map for each different space"}),(0,n.kt)(i.Z,{src:"/static/tutorial-basics/how-to-mapping//pointclouds.mp4",className:"custom-video-showcase",mdxType:"VideoPlayer"}),(0,n.kt)("p",null,'If you want to connect many separate areas together in one map, you need to make sure the areas can be connected visually. One way is to create an "image path" from one space to another.'),(0,n.kt)("coverimg",{url:t(76493),label:"Make sure you can see the both spaces at once at some points"}),(0,n.kt)("p",null,"It doesn't matter if you're mapping a small apartment or a shopping mall. The mapping techniques scale with the spaces."),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"anchor-images"},"Anchor Images"),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"By default, the constructed map is in no specific orientation!")),(0,n.kt)("p",null,"The Y-axis of the map might be correctly pointing up, but rotation around the Y-axis is not constrained and can change between different constructions if you remap the same space."),(0,n.kt)("p",null,"Using just GPS or the device compass to orient the map is not reliable enough."),(0,n.kt)("p",null,"This makes it difficult to maintain AR content so we provide a way to accurately define the orientation of the map.",(0,n.kt)("br",{parentName:"p"}),"\n","With an ",(0,n.kt)("strong",{parentName:"p"},"Anchor Image"),", you can make sure the map orientation is preserved when remapping a space."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Only the latest Anchor Image is used when constructing a map.")),(0,n.kt)("h3",{id:"using-anchor-images"},"Using Anchor Images"),(0,n.kt)("p",null,"When using the ",(0,n.kt)("strong",{parentName:"p"},"Mapping App"),", open the ",(0,n.kt)("strong",{parentName:"p"},"Tools Menu")," in Workspace mode and click ",(0,n.kt)("strong",{parentName:"p"},"Add Anchor Image"),"."),(0,n.kt)("p",null,"A notification should appear when ",(0,n.kt)("strong",{parentName:"p"},"Anchor Image")," is captured."),(0,n.kt)("p",null,"When adding the ",(0,n.kt)("strong",{parentName:"p"},"Anchor Image"),", an image is captured and the device orientation is recorded.\nThe recorded orientation is then used when constructing the map."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"When capturing the Anchor Image, the device camera direction is used to determine the map Z-axis.",(0,n.kt)("br",{parentName:"p"}),"\n",'Map Y-axis is automatically computed based on the device sensors and "up" direction.')))}d.isMDXComponent=!0},44681:(e,a,t)=>{t.d(a,{Z:()=>r});var o=t(67294);const n="column_RQPg",i="container_GoNi";var s=t(71455);function r(e){let{children:a,imagePath:t}=e;return o.createElement("div",{className:i},o.createElement("div",{className:n},o.createElement(s.TV,null,o.createElement(s.HI,{src:t.default},o.createElement("img",{src:t.default,alt:"",style:{borderRadius:"1rem",objectFit:"fill"}})))),o.createElement("div",null,a))}},61422:(e,a,t)=>{t.d(a,{Z:()=>s});var o=t(87462),n=t(67294),i=t(86010);function s(e){let{src:a,mobile:t,className:s,...r}=e;return n.createElement("video",(0,o.Z)({className:(0,i.Z)(s,t&&"mobile"),src:a,autoPlay:!0,loop:!0,controls:!1,muted:!0},r,{"webkit-playsinline":"true",playsinline:"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true"}))}},36463:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/ar_hotspots-f1070a57dc730f76725618cb855aeacd.jpg"},62463:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/ar_hotspots_mapping-9af64ebbd7eeb0186aa86d5a3ba3ff4d.jpg"},13659:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/ar_hotspots_mapping2-e89040e09da82912d1cb40f85be2fb89.jpg"},19180:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/ar_hotspots_mapping3-e819ac0f4824c621289a564ac462fb9d.jpg"},18948:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/ar_hotspots_statue-9526c4d6cb494af9cc6e3cba719c2606.jpg"},39529:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/bad_low_light-d9dd29d8ad3a25a82017daf7419ca0ae.jpg"},62705:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/bad_no_features-9ca2a7be349338f0b22ba269cb028c66.jpg"},42573:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/bad_no_overlap_between_sets-f2fd5c79edf1bfcf03c283c5466f9660.jpg"},23952:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/bad_no_parallax_between_sets-cd88b6d829fab16633da1bf40918a788.jpg"},68378:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/bad_reflective-8fdc75388a7c26ead9a487991975f991.jpg"},61856:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/enough_coverage-5efcac6a59327c3c890cbfa434d35223.png"},54561:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/good_coverage-1b71072bbe8c07054d73bf8b0bfe8c2e.jpg"},28512:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/good_enough_features-cf3783e3cbd800473f37e3361b91226b.jpg"},79686:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/good_overlap_example-53f547da95f7ac6b18a287398b21513e.jpg"},95295:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/map_connectivity-b28e7d336428b024878a75f7daf4f506.jpg"},34416:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/mapping_a_room-a2b33f5d8d0493af88e4b8f648dd735d.jpg"},54710:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/mapping_a_room_outside_in-68856830e11a61dc18d6aaed6f4b1e41.jpg"},62160:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/mapping_multiple_rooms-73cb353a3850d7f6179f272ba0fff63e.jpg"},76493:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/mapping_multiple_rooms_image_path-5a027ea58a58b9ded39a0e5072f90fa3.jpg"},24456:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/no_overlap-35e4f2b58372f73dc4c83c9932f0a2af.png"},6800:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/not_as_a_panorama-34dc231733dd78778e56775600edf21a.png"},22031:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/not_enough_coverage-157358dab99b36740428760ab5058006.png"},27883:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/outside_in_mapping-2de3180975d12fe04e8b9b2404d43edf.png"},78439:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});const o=t.p+"assets/images/overlap_with_images-539dfe2677bf7ba46570f9d026bccc6a.jpg"}}]);